var d=Object.defineProperty;var f=(o,t,e)=>t in o?d(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e;var l=(o,t,e)=>f(o,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const n of r.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&s(n)}).observe(document,{childList:!0,subtree:!0});function e(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=e(i);fetch(i.href,r)}})();class u{constructor(t){l(this,"offset");l(this,"viewPane");l(this,"app");l(this,"tileMap");this.offset={x:0,y:0},this.app=t,this.tileMap=new Map,this.viewPane=document.createElement("div"),this.app.appContainer.appendChild(this.viewPane)}setOffset(t){this.offset.x=t.x,this.offset.y=t.y,this.viewPane.style.transform=`translateX(${this.offset.x}px) translateY(${this.offset.y}px)`}setVisibleTiles(t){for(let e=t.startX;e<t.endX;e++)for(let s=t.startY;s<t.endY;s++)this.addTile(e,s)}addTile(t,e){const s=`${t},${e}`;if(!this.tileMap.has(s)){const i=this.createTile(t,e);this.viewPane.appendChild(i),this.tileMap.set(s,i)}}createTile(t,e){const s=document.createElement("div");return s.style.position="absolute",s.style.width=`${this.app.tileSize}px`,s.style.height=`${this.app.tileSize}px`,s.style.transform=`translateX(${this.app.tileSize*t}px) translateY(${this.app.tileSize*e}px)`,s.style.backgroundColor="blue",s.style.border="1px solid yellow",s}}class y{constructor(t){l(this,"appContainer");l(this,"mouseMoveStart");l(this,"viewport");l(this,"lastScrollOffset");l(this,"scrollOffset");l(this,"tileSize",20);l(this,"renderer");l(this,"padding",1);this.appContainer=t,this.mouseMoveStart=null,this.viewport={width:t.clientWidth,height:t.clientHeight},this.lastScrollOffset={x:0,y:0},this.scrollOffset={x:0,y:0},this.renderer=new u(this),this.addListeners(),this.viewport.width=this.appContainer.clientWidth,this.viewport.height=this.appContainer.clientHeight,this.appContainer.style.cursor="grab",this.renderer.setVisibleTiles(this.calculateVisibleTiles())}addListeners(){this.appContainer.addEventListener("mousedown",e=>{this.mouseMoveStart={x:e.clientX,y:e.clientY},this.appContainer.style.cursor="grabbing"}),this.appContainer.addEventListener("mouseup",()=>{this.mouseMoveStart=null,this.lastScrollOffset={x:this.scrollOffset.x,y:this.scrollOffset.y},this.renderer.setOffset(this.scrollOffset),this.renderer.setVisibleTiles(this.calculateVisibleTiles()),this.appContainer.style.cursor="grab"}),this.appContainer.addEventListener("mousemove",e=>{this.mouseMoveStart!==null&&(this.scrollOffset.x=this.lastScrollOffset.x+(e.clientX-this.mouseMoveStart.x),this.scrollOffset.y=this.lastScrollOffset.y+(e.clientY-this.mouseMoveStart.y),this.renderer.setOffset(this.scrollOffset))}),new ResizeObserver(e=>{this.viewport.width=e[0].contentRect.width,this.viewport.height=e[0].contentRect.height,this.renderer.setVisibleTiles(this.calculateVisibleTiles())}).observe(this.appContainer)}calculateVisibleTiles(){const t={x:this.scrollOffset.x+this.tileSize*this.padding,y:this.scrollOffset.y+this.tileSize*this.padding},e={width:this.viewport.width+this.tileSize*(2*this.padding),height:this.viewport.height+this.tileSize*(2*this.padding)},s=-t.x/this.tileSize,i=-t.y/this.tileSize,r=Math.ceil(e.width/this.tileSize),n=Math.ceil(e.height/this.tileSize),a=Math.floor(s),h=Math.floor(i),c=Math.ceil(s+r),p=Math.ceil(i+n);return{startX:a,startY:h,endX:c,endY:p}}start(){}}const m=new y(document.querySelector("#app"));m.start();
